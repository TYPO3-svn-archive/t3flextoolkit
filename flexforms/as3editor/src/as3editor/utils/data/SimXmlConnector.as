package as3editor.utils.data {	import flash.system.Security;	import flash.system.SecurityPanel;	import flash.display.Sprite;	import flash.events.Event;	import flash.net.URLLoader;	import flash.net.URLRequest;	import flash.text.TextField;	import flash.text.TextFieldAutoSize;	import flash.xml.*;	import flash.events.IOErrorEvent;	public class SimXmlConnector extends Sprite {		private var xmlTextField:TextField = new TextField();		public var callback:Object;		public var returnState:String;		public var baseUrl:String;		public var xmlObj:Object;		private var externalXML:XML;		private var loader:URLLoader;		public function SimXmlConnector(url:String) {			baseUrl=url;		}		public function init():void {			//Security.loadPolicyFile("crossdomain.xml"); simData.xml			var request:URLRequest = new URLRequest(getUrl());			loader = new URLLoader();			try {				loader.load(request);			} catch (error:SecurityError) {				trace("A SecurityError has occurred.");			}			loader.addEventListener(IOErrorEvent.IO_ERROR, errorHandler);			loader.addEventListener(Event.COMPLETE, loaderCompleteHandler);			xmlTextField.x = 10;			xmlTextField.y = 10;			xmlTextField.background = true;			xmlTextField.autoSize = TextFieldAutoSize.LEFT;			addChild(xmlTextField);		}		public function getUrl():String {			return this.baseUrl;		}		public function loaderCompleteHandler(event:Event):void {			var xml:XML=new XML(loader.data);			this.callback(xml);		}		public function errorHandler(e:IOErrorEvent):void {			xmlTextField.text = "Had problem loading the XML File.";		}	}}